
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/resources/UIDatePicker/UIDatePicker.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '6d106l+tDRL5rbAU45iCnts', 'UIDatePicker');
// resources/UIDatePicker/UIDatePicker.js

"use strict";

/** 
 * 日期组件
 */
cc.Class({
  "extends": cc.Component,
  properties: {
    lbYearMonth: cc.Label,
    ndDays: cc.Node,
    pfbDay: cc.Prefab,
    yearText: cc.Label,
    monthText: cc.Label,
    dayText: cc.Label
  },
  onLoad: function onLoad() {
    this.initData();
    this.updateDate();
    this.setDate(1994, 4, 29);
  },
  initData: function initData() {
    this.date = this.date ? this.date : new Date();
    this.year = this.date.getFullYear();
    this.month = this.date.getMonth();
    this.day = this.date.getDate();
    this.pfgListDay = [];

    for (var i = 0; i < 31; ++i) {
      var node = cc.instantiate(this.pfbDay);
      node.parent = this.ndDays;
      this.pfgListDay.push(node);
    }
  },
  // 设置显示的日志，默认为当前日期
  setDate: function setDate(year, month, day) {
    this.date = new Date(year, month, day);
    this.year = this.date.getFullYear();
    this.month = this.date.getMonth();
    this.day = this.date.getDate();
    this.updateDate();
  },
  updateDate: function updateDate() {
    var _this = this;

    this.lbYearMonth.string = cc.js.formatStr("%s年%s月", this.year, this.month + 1);
    var date = new Date(this.year, this.month, 0);
    var totalDays = date.getDate();
    var fromWeek = date.getDay();

    for (var i = 0; i < this.pfgListDay.length; ++i) {
      var node = this.pfgListDay[i];

      if (i < totalDays) {
        node.active = true;
        var index = fromWeek + i;
        var row = Math.floor(index / 7);
        var col = index % 7;
        var x = -(this.ndDays.width - node.width) * 0.5 + col * node.width;
        var y = (this.ndDays.height - node.height) * 0.5 - row * node.height;
        node.setPosition(x, y);
        var script = node.getComponent("UIItemDay");
        script.setDay(i, i + 1, this.day === i + 1, function (selIndex, selDay) {
          _this.day = selDay;

          _this.updateDate();
        });
      } else {
        node.active = false;
      }
    }

    this.yearText.string = this.year;
    this.monthText.string = this.month + 1;
    this.dayText.string = this.day; //console.log( this.yearText + "." +   this.monthText + "."+ this.dayText);
  },
  onClickLeft: function onClickLeft() {
    if (this.month > 0) {
      this.month -= 1;
    } else {
      this.month = 11;
      this.year -= 1;
    }

    this.date.setFullYear(this.year);
    this.date.setMonth(this.month);
    this.updateDate();
  },
  onClickRight: function onClickRight() {
    if (this.month < 11) {
      this.month += 1;
    } else {
      this.month = 0;
      this.year += 1;
    }

    this.date.setFullYear(this.year);
    this.date.setMonth(this.month);
    this.updateDate();
  },
  // 设置选中日期之后的回调
  setPickDateCallback: function setPickDateCallback(cb) {
    this.cb = cb;
  },
  onClickClose: function onClickClose() {
    if (this.cb) {
      this.cb(this.year, this.month, this.day);
    }

    this.node.parent = null;
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9yZXNvdXJjZXMvVUlEYXRlUGlja2VyL1VJRGF0ZVBpY2tlci5qcyJdLCJuYW1lcyI6WyJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsImxiWWVhck1vbnRoIiwiTGFiZWwiLCJuZERheXMiLCJOb2RlIiwicGZiRGF5IiwiUHJlZmFiIiwieWVhclRleHQiLCJtb250aFRleHQiLCJkYXlUZXh0Iiwib25Mb2FkIiwiaW5pdERhdGEiLCJ1cGRhdGVEYXRlIiwic2V0RGF0ZSIsImRhdGUiLCJEYXRlIiwieWVhciIsImdldEZ1bGxZZWFyIiwibW9udGgiLCJnZXRNb250aCIsImRheSIsImdldERhdGUiLCJwZmdMaXN0RGF5IiwiaSIsIm5vZGUiLCJpbnN0YW50aWF0ZSIsInBhcmVudCIsInB1c2giLCJzdHJpbmciLCJqcyIsImZvcm1hdFN0ciIsInRvdGFsRGF5cyIsImZyb21XZWVrIiwiZ2V0RGF5IiwibGVuZ3RoIiwiYWN0aXZlIiwiaW5kZXgiLCJyb3ciLCJNYXRoIiwiZmxvb3IiLCJjb2wiLCJ4Iiwid2lkdGgiLCJ5IiwiaGVpZ2h0Iiwic2V0UG9zaXRpb24iLCJzY3JpcHQiLCJnZXRDb21wb25lbnQiLCJzZXREYXkiLCJzZWxJbmRleCIsInNlbERheSIsIm9uQ2xpY2tMZWZ0Iiwic2V0RnVsbFllYXIiLCJzZXRNb250aCIsIm9uQ2xpY2tSaWdodCIsInNldFBpY2tEYXRlQ2FsbGJhY2siLCJjYiIsIm9uQ2xpY2tDbG9zZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7O0FBR0FBLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ0wsYUFBU0QsRUFBRSxDQUFDRSxTQURQO0FBR0xDLEVBQUFBLFVBQVUsRUFBRTtBQUNSQyxJQUFBQSxXQUFXLEVBQUVKLEVBQUUsQ0FBQ0ssS0FEUjtBQUVSQyxJQUFBQSxNQUFNLEVBQUVOLEVBQUUsQ0FBQ08sSUFGSDtBQUdSQyxJQUFBQSxNQUFNLEVBQUVSLEVBQUUsQ0FBQ1Ms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SCxXQUFLQSxLQUFMLEdBQWEsRUFBYjtBQUNBLFdBQUtGLElBQUwsSUFBYSxDQUFiO0FBQ0g7O0FBQ0QsU0FBS0YsSUFBTCxDQUFVc0MsV0FBVixDQUFzQixLQUFLcEMsSUFBM0I7QUFDQSxTQUFLRixJQUFMLENBQVV1QyxRQUFWLENBQW1CLEtBQUtuQyxLQUF4QjtBQUNBLFNBQUtOLFVBQUw7QUFDSCxHQWxGSTtBQW9GTDBDLEVBQUFBLFlBcEZLLDBCQW9GVztBQUNaLFFBQUksS0FBS3BDLEtBQUwsR0FBYSxFQUFqQixFQUFxQjtBQUNqQixXQUFLQSxLQUFMLElBQWMsQ0FBZDtBQUNILEtBRkQsTUFFTztBQUNILFdBQUtBLEtBQUwsR0FBYSxDQUFiO0FBQ0EsV0FBS0YsSUFBTCxJQUFhLENBQWI7QUFDSDs7QUFDRCxTQUFLRixJQUFMLENBQVVzQyxXQUFWLENBQXNCLEtBQUtwQyxJQUEzQjtBQUNBLFNBQUtGLElBQUwsQ0FBVXVDLFFBQVYsQ0FBbUIsS0FBS25DLEtBQXhCO0FBQ0EsU0FBS04sVUFBTDtBQUNILEdBOUZJO0FBZ0dMO0FBQ0EyQyxFQUFBQSxtQkFqR0ssK0JBaUdlQyxFQWpHZixFQWlHbUI7QUFDcEIsU0FBS0EsRUFBTCxHQUFVQSxFQUFWO0FBRUgsR0FwR0k7QUFzR0xDLEVBQUFBLFlBdEdLLDBCQXNHVztBQUNaLFFBQUksS0FBS0QsRUFBVCxFQUFhO0FBQ1gsV0FBS0EsRUFBTCxDQUFRLEtBQUt4QyxJQUFiLEVBQW1CLEtBQUtFLEtBQXhCLEVBQStCLEtBQUtFLEdBQXBDO0FBQ0Q7O0FBQ0QsU0FBS0ksSUFBTCxDQUFVRSxNQUFWLEdBQW1CLElBQW5CO0FBQ0g7QUEzR0ksQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiLyoqIFxuICog5pel5pyf57uE5Lu2XG4gKi9cbmNjLkNsYXNzKHtcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXG5cbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIGxiWWVhck1vbnRoOiBjYy5MYWJlbCxcbiAgICAgICAgbmREYXlzOiBjYy5Ob2RlLFxuICAgICAgICBwZmJEYXk6IGNjLlByZWZhYixcbiAgICAgICAgIHllYXJUZXh0OiBjYy5MYWJlbCxcbiAgICAgICAgIG1vbnRoVGV4dDogY2MuTGFiZWwsXG4gICAgICAgICBkYXlUZXh0OiBjYy5MYWJlbCxcbiAgICB9LFxuXG4gICAgb25Mb2FkICgpIHtcbiAgICAgICAgdGhpcy5pbml0RGF0YSgpO1xuICAgICAgICB0aGlzLnVwZGF0ZURhdGUoKTtcbiAgICAgICAgdGhpcy5zZXREYXRlKDE5OTQsNCwyOSk7XG4gICAgfSxcblxuICAgIGluaXREYXRhKCkge1xuICAgICAgICB0aGlzLmRhdGUgPSB0aGlzLmRhdGUgPyB0aGlzLmRhdGUgOiBuZXcgRGF0ZSgpO1xuICAgICAgICB0aGlzLnllYXIgPSB0aGlzLmRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgdGhpcy5tb250aCA9IHRoaXMuZGF0ZS5nZXRNb250aCgpO1xuICAgICAgICB0aGlzLmRheSA9IHRoaXMuZGF0ZS5nZXREYXRlKCk7XG5cbiAgICAgICAgdGhpcy5wZmdMaXN0RGF5ID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzE7ICsraSkge1xuICAgICAgICAgICAgbGV0IG5vZGUgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLnBmYkRheSk7XG4gICAgICAgICAgICBub2RlLnBhcmVudCA9IHRoaXMubmREYXlzO1xuICAgICAgICAgICAgdGhpcy5wZmdMaXN0RGF5LnB1c2gobm9kZSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8g6K6+572u5pi+56S655qE5pel5b+X77yM6buY6K6k5Li65b2T5YmN5pel5pyfXG4gICAgc2V0RGF0ZSh5ZWFyLCBtb250aCwgZGF5KSB7XG4gICAgICAgIHRoaXMuZGF0ZSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXkpO1xuICAgICAgICB0aGlzLnllYXIgPSB0aGlzLmRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgdGhpcy5tb250aCA9IHRoaXMuZGF0ZS5nZXRNb250aCgpO1xuICAgICAgICB0aGlzLmRheSA9IHRoaXMuZGF0ZS5nZXREYXRlKCk7XG4gICAgICAgIHRoaXMudXBkYXRlRGF0ZSgpO1xuICAgIH0sXG5cbiAgICB1cGRhdGVEYXRlICgpIHtcbiAgICAgICAgdGhpcy5sYlllYXJNb250aC5zdHJpbmcgPSBjYy5qcy5mb3JtYXRTdHIoXCIlc+W5tCVz5pyIXCIsIHRoaXMueWVhciwgdGhpcy5tb250aCArIDEpO1xuXG4gICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUodGhpcy55ZWFyLCB0aGlzLm1vbnRoLCAwKTtcbiAgICAgICAgbGV0IHRvdGFsRGF5cyA9IGRhdGUuZ2V0RGF0ZSgpO1xuICAgICAgICBsZXQgZnJvbVdlZWsgPSBkYXRlLmdldERheSgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGZnTGlzdERheS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgbGV0IG5vZGUgPSB0aGlzLnBmZ0xpc3REYXlbaV07XG4gICAgICAgICAgICBpZiAoaSA8IHRvdGFsRGF5cykge1xuICAgICAgICAgICAgICAgIG5vZGUuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBmcm9tV2VlayArIGk7XG4gICAgICAgICAgICAgICAgbGV0IHJvdyA9IE1hdGguZmxvb3IoaW5kZXggLyA3KTtcbiAgICAgICAgICAgICAgICBsZXQgY29sID0gaW5kZXggJSA3O1xuICAgICAgICAgICAgICAgIGxldCB4ID0gLSh0aGlzLm5kRGF5cy53aWR0aCAtIG5vZGUud2lkdGgpICogMC41ICsgY29sICogbm9kZS53aWR0aDtcbiAgICAgICAgICAgICAgICBsZXQgeSA9ICh0aGlzLm5kRGF5cy5oZWlnaHQgLSBub2RlLmhlaWdodCkgKiAwLjUgLSByb3cgKiBub2RlLmhlaWdodDtcbiAgICAgICAgICAgICAgICBub2RlLnNldFBvc2l0aW9uKHgsIHkpO1xuICAgICAgICAgICAgICAgIGxldCBzY3JpcHQgPSBub2RlLmdldENvbXBvbmVudChcIlVJSXRlbURheVwiKTtcbiAgICAgICAgICAgICAgICBzY3JpcHQuc2V0RGF5KGksIGkgKyAxLCB0aGlzLmRheSA9PT0gaSArIDEsIChzZWxJbmRleCwgc2VsRGF5KT0+e1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRheSA9IHNlbERheTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5vZGUuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy55ZWFyVGV4dC5zdHJpbmcgPSB0aGlzLnllYXI7XG4gICAgICAgIHRoaXMubW9udGhUZXh0LnN0cmluZyA9IHRoaXMubW9udGgrMTtcbiAgICAgICAgdGhpcy5kYXlUZXh0LnN0cmluZyA9IHRoaXMuZGF5O1xuICAgICAgICAvL2NvbnNvbGUubG9nKCB0aGlzLnllYXJUZXh0ICsgXCIuXCIgKyAgIHRoaXMubW9udGhUZXh0ICsgXCIuXCIrIHRoaXMuZGF5VGV4dCk7XG4gICAgfSxcblxuICAgIG9uQ2xpY2tMZWZ0ICgpIHtcbiAgICAgICAgaWYgKHRoaXMubW9udGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLm1vbnRoIC09IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1vbnRoID0gMTE7XG4gICAgICAgICAgICB0aGlzLnllYXIgLT0gMTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRhdGUuc2V0RnVsbFllYXIodGhpcy55ZWFyKTtcbiAgICAgICAgdGhpcy5kYXRlLnNldE1vbnRoKHRoaXMubW9udGgpO1xuICAgICAgICB0aGlzLnVwZGF0ZURhdGUoKTtcbiAgICB9LFxuXG4gICAgb25DbGlja1JpZ2h0ICgpIHtcbiAgICAgICAgaWYgKHRoaXMubW9udGggPCAxMSkge1xuICAgICAgICAgICAgdGhpcy5tb250aCArPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5tb250aCA9IDA7XG4gICAgICAgICAgICB0aGlzLnllYXIgKz0gMTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRhdGUuc2V0RnVsbFllYXIodGhpcy55ZWFyKTtcbiAgICAgICAgdGhpcy5kYXRlLnNldE1vbnRoKHRoaXMubW9udGgpO1xuICAgICAgICB0aGlzLnVwZGF0ZURhdGUoKTtcbiAgICB9LFxuXG4gICAgLy8g6K6+572u6YCJ5Lit5pel5pyf5LmL5ZCO55qE5Zue6LCDXG4gICAgc2V0UGlja0RhdGVDYWxsYmFjayhjYikge1xuICAgICAgICB0aGlzLmNiID0gY2I7XG4gICAgICBcbiAgICB9LFxuXG4gICAgb25DbGlja0Nsb3NlICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2IpIHtcbiAgICAgICAgICB0aGlzLmNiKHRoaXMueWVhciwgdGhpcy5tb250aCwgdGhpcy5kYXkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubm9kZS5wYXJlbnQgPSBudWxsO1xuICAgIH0sXG59KTtcbiJdfQ==